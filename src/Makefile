#----------------------------------------------------------------------------
# Makefile for GNU make
# Generated by m2 at 20-Oct-2001/16:52:54-7:00
# Project: txfutil
#----------------------------------------------------------------------------


#------ Compiler and tools

CC       = gcc
CXX      = g++
LINK	 = g++
TAR      = tar -cf
GZIP	 = gzip -9f
MOC      = moc


#------ Target settings

SHOWTT_CFLAGS   = -DDEBUG -pipe -Wall -W -g 
SHOWTT_CXXFLAGS = $(SHOWTT_CFLAGS) 
SHOWTT_INCPATH  = -I/usr/local/include/freetype2/ -I/usr/X11R6/include
SHOWTT_LFLAGS   = 
SHOWTT_LIBS     = -L/usr/local/lib -L/usr/X11R6/lib -lglut -lfreetype -lGL -lGLU -lXext -lX11 -lm
SHOWTT_SOURCES  = 	showtt.c

SHOWTT_OBJECTS  = 	obj/showtt.o



TTF2TXF_CFLAGS   =  -pipe -Wall -W -g 
TTF2TXF_CXXFLAGS = $(TTF2TXF_CFLAGS) 
TTF2TXF_INCPATH  = -I/usr/include/freetype2/ -I/usr/X11R6/include
TTF2TXF_LFLAGS   = 
TTF2TXF_LIBS     = -L/usr/local/lib -L/usr/X11R6/lib -lfreetype -lGL -lGLU -lXext -lX11 -lm
TTF2TXF_SOURCES  = 	ttf2txf.cpp

TTF2TXF_OBJECTS  = 	obj/ttf2txf.o



SHOWTXF_CFLAGS   = -DDISPLAY -pipe -Wall -W -g 
SHOWTXF_CXXFLAGS = $(SHOWTXF_CFLAGS) 
SHOWTXF_INCPATH  = -I/usr/X11R6/include
SHOWTXF_LFLAGS   = 
SHOWTXF_LIBS     = -L/usr/X11R6/lib -lglut -lGL -lGLU -lXext -lX11 -lm
SHOWTXF_SOURCES  = 	showtxf.cpp \
	texfont.c

SHOWTXF_OBJECTS  = 	obj/showtxf.o \
	obj/texfont.o


ARCHIVE = txfutil-1.0.0
DIST_FILES = \
	Makefile \
	README \
	texfont.h


#------ Build rules

all: showtt ttf2txf showtxf
 
showtt: $(SHOWTT_OBJECTS)
	$(LINK) -o $@ $(SHOWTT_LFLAGS) $(SHOWTT_OBJECTS) $(SHOWTT_LIBS)
 
ttf2txf: $(TTF2TXF_OBJECTS)
	$(LINK) -o $@ $(TTF2TXF_LFLAGS) $(TTF2TXF_OBJECTS) $(TTF2TXF_LIBS)
 
showtxf: $(SHOWTXF_OBJECTS)
	$(LINK) -o $@ $(SHOWTXF_LFLAGS) $(SHOWTXF_OBJECTS) $(SHOWTXF_LIBS)


Makefile: project.r
	m2 project.r

.PHONY: dist
dist:
	$(TAR) $(ARCHIVE).tar --exclude CVS --exclude *.o project.r obj/ $(SHOWTT_SOURCES) $(SHOWTT_HEADERS) $(TTF2TXF_SOURCES) $(TTF2TXF_HEADERS) $(SHOWTXF_SOURCES) $(SHOWTXF_HEADERS) $(DIST_FILES)
	mkdir /tmp/$(ARCHIVE)
	tar -C /tmp/$(ARCHIVE) -xf $(ARCHIVE).tar
	tar -C /tmp -cf $(ARCHIVE).tar $(ARCHIVE)
	rm -rf /tmp/$(ARCHIVE)
	$(GZIP) $(ARCHIVE).tar

.PHONY: clean
clean:
	-rm -f core
	-rm -f showtt $(SHOWTT_OBJECTS)
	-rm -f ttf2txf $(TTF2TXF_OBJECTS)
	-rm -f showtxf $(SHOWTXF_OBJECTS)


#------ Compile rules

obj/showtt.o: showtt.c
	$(CC) -c $(SHOWTT_CFLAGS) -o obj/showtt.o $(SHOWTT_INCPATH) showtt.c

obj/ttf2txf.o: ttf2txf.cpp
	$(CXX) -c $(TTF2TXF_CXXFLAGS) -o obj/ttf2txf.o $(TTF2TXF_INCPATH) ttf2txf.cpp

obj/showtxf.o: showtxf.cpp \
	texfont.h
	$(CXX) -c $(SHOWTXF_CXXFLAGS) -o obj/showtxf.o $(SHOWTXF_INCPATH) showtxf.cpp

obj/texfont.o: texfont.c \
	texfont.h
	$(CC) -c $(SHOWTXF_CFLAGS) -o obj/texfont.o $(SHOWTXF_INCPATH) texfont.c


#EOF
